version: "3.9"

services:
  app:
    # Construye una imagen propia porque necesitamos Java 25 + herramientas de desarrollo
    # (git/fish) disponibles desde el arranque para que VS Code las detecte.
    build:
      context: ..
      dockerfile: .devcontainer/Dockerfile
    volumes:
      # Monta el proyecto del host dentro del contenedor.
      - ..:/workspace:cached
      # Cache persistente de Maven (~/.m2) para no descargar dependencias cada vez.
      - balancehub-m2:/root/.m2
    # Mantiene vivo el contenedor para que VS Code se conecte y t√∫ ejecutes comandos manualmente.
    command: sleep infinity
    # Carpeta de trabajo por defecto cuando se abre terminal dentro del contenedor.
    working_dir: /workspace

volumes:
  # Volumen Docker nombrado para el cache de Maven.
  balancehub-m2:
